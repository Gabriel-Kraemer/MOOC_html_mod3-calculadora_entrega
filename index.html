<!DOCTYPE html>
<html>
  <head>
    <title>Calculadora</title>
    <meta charset="utf-8" />
    <script type="text/javascript">
      var arr = [];
      var numero ;
      var operador = "+";
      const vaciar = () => {
        document.getElementById("pantalla").value = "";
      }

      const validar = () => {
        let valor = document.getElementById("pantalla").value;
          if (valor.includes(",")){
            arr = valor.split(",");
            //arr.forEach(i => parseInt(i,10));
            //arr.forEach(i => prompt(typeof i))
            return arr;
          } else {
            numero = +valor;
            if (isNaN(numero)) {
              document.getElementById("pantalla").value = "Error";
              return numero="Error";
            }
            return numero;
          }
      }

      const cuadrado = () => {
        validar();
        document.getElementById("pantalla").value = (numero * numero);
        llenar_info();
      }

      const mod = () => {
        validar();
        if (numero < 0) {
          numero *= -1;
        }
        document.getElementById("pantalla").value = numero;
        llenar_info();
      }

      const fact = () => {
        validar();
        if (numero < 1)
          nummero = 1;
        for (let i = numero - 1; i >=1; i--)
          {numero *= i};
          document.getElementById("pantalla").value = numero;
        llenar_info();
      }

      var a = 0 //,b = 0;
      const mul = () => {
        validar();
        operador = "*";
        vaciar();
      }

      const add = () => {
        validar();
        operador = "+";
        vaciar();
      }

      const eq = (b) => {
        b = document.getElementById("pantalla").value;
        let resultado = document.getElementById("pantalla");
        operador == "*"? resultado.value =  numero * b: resultado.value = numero + +b;
      }

      const sumatorio = () => {
        validar();
        let i = 0, acc = 0;
        while (i < arr.length) acc += +arr[i++];
        document.getElementById("pantalla").value = acc;
      }

      const ordenar = () => {
          validar();
          document.getElementById("pantalla").value = arr.sort((a, b) => a - b);
      }

      const revertir = () => {
          validar();
          document.getElementById("pantalla").value = arr.reverse();
      }
      const quitar = () => {
          validar();
          arr.pop();
          document.getElementById("pantalla").value = arr;
      }

      const llenar_info = () => {
        let inf = document.getElementById("info");
        let num = document.getElementById("pantalla");
        if (num.value > 200) {
          inf.innerHTML = "Info: El resultado es superior a 200";
        } else if (num.value >= 100 ) {
          inf.innerHTML = "Info: El resultado está entre 100 y 200";
        } else {
          inf.innerHTML = "Info: El resultado es menor que 100";
        }
      }
    </script>
  </head>
  <body>
    Número:
    <input type="text" id="pantalla" onclick="vaciar()" />
    <div>
      <h2 id="info" class="grande" title="Info sobre el número">
        Info sobre el número
      </h2>
      <!--button id="actualiza" onclick="llenar_info()">ACK</button-->
    </div>
    <div>
      <h3>Operaciones Unitarias</h3>
      <button id="cuadrado" onclick="cuadrado()">x<sup>2</sup></button>
      <button id="modulo" onclick="mod()">|X|</button>
      <button id="factorial" onclick="fact()"><bold>n!</bold></button>
    </div>
    <div>
      <h3>Operaciones Binarias</h3>
      <button id="multiplicacion" onclick="mul()"><bold> * </bold></button>
      <button id="suma" onclick="add()"><bold> + </bold></button>
      <button id="igual" onclick="eq()"><bold> = </bold></button>
    </div>
    <div>
      <h3>Operaciones en formato CSV</h3>
      <button id="sumatorio" onclick="sumatorio()"><bold>Σx</bold></button>
      <button id="ordenar" onclick="ordenar()">ordenar</button>
      <button id="revertir" onclick="revertir()">revertir</button>
      <button id="quitar" onclick="quitar()">quitar</button>
    </div>
  </body>
</html>
